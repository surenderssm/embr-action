name: Example Embr Workflow

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  embr-task:
    runs-on: ubuntu-latest
    name: Run Embr Action Example
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Run Embr Action
        id: embr
        uses: ./
        with:
          # Note: This example uses httpbin.org which will demonstrate
          # the initial POST call but polling will timeout since httpbin
          # doesn't maintain state. Replace with your actual endpoint.
          endpoint: 'https://httpbin.org/anything'
          polling-interval: '5'
          max-attempts: '3'
          timeout: '10000'
      
      - name: Display Results
        if: always()
        run: |
          echo "Task Status: ${{ steps.embr.outputs.status }}"
          echo "Task Response: ${{ steps.embr.outputs.response }}"
